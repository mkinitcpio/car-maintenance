<li class="categories-tree-node">
  <div class="categories-tree-node__content"
       [class.categories-tree-node__content--select]="selected === child.id"
       (click)="onSelect()">
    <span class="categories-tree-node__expand-button-container">
      <mat-icon class="categories-tree-node__expand-button"
                *ngIf="child.children?.length"
                (click)="expand = !expand; $event.stopPropagation()">
          {{expand ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
    </span>
    <span class="categories-tree-node__name"
          [class.categories-tree-node__name--sub-node]="isSubNode">
      {{child.name}}
    </span>
    <mat-icon class="menu-button" [matMenuTriggerFor]="contextMenu" (click)="$event.stopPropagation()">more_horiz</mat-icon>
  </div>
  <ng-container *ngIf="expand && child.children?.length">
    <ul class="categories-tree-node__sub-node">
      <app-categories-tree-node *ngFor="let c of child.children"
                                [selected]="selected"
                                [isSubNode]="true"
                                [child]="c"
                                (edit)="onEdit(c)"
                                (select)="onSelect(c)"
                                (delete)="onDelete(c)">
      </app-categories-tree-node>
    </ul>
  </ng-container>
</li>

<mat-menu #contextMenu="matMenu">
  <ng-template matMenuContent>
      <button mat-menu-item *ngIf="!child.parent" (click)="onAdd()">Добавить</button>
      <button mat-menu-item (click)="onEdit()">Редактировать</button>
      <button mat-menu-item (click)="onDelete()">Удалить</button>
  </ng-template>
</mat-menu>
