<app-details [title]="categoryDetails.data.name" class="category-details">
  <ng-container buttons-right>
    <app-button button-transparent (click)="onPrint()">
      <mat-icon svgIcon="printer-new"></mat-icon>
    </app-button>
  </ng-container>

  <ng-container content>
    <div class="category-details__info-section">
      <div class="category-details__column">
        <app-rich-widget *ngIf="categoryDetails.type === CategoryTypeEnum.Car"
                          icon="speed-new"
                          type="mileage"
                          tooltip="PAGES.CATEGORY_DETAILS.TOOLTIPS.MILEAGE"
                          [title]="'PAGES.CATEGORY_DETAILS.WIDGETS.MILEAGE'"
                          value="{{categoryDetails.data.mileage}}"
        >
        </app-rich-widget>

        <app-rich-widget icon="money-new"
                type="currency"
                tooltip="PAGES.CATEGORY_DETAILS.TOOLTIPS.OVERALL_EXPENSE"
                [title]="'PAGES.DETAIL.OVERALL_EXPENSE'"
                value="{{totalCost}}"
        >
        </app-rich-widget>
      </div>
      <app-widget [title]="'PAGES.CATEGORY_DETAILS.WIDGETS.INFO' | translate" icon="task-new" *ngIf="categoryDetails.type === CategoryTypeEnum.Car">
        <section class="car-info__content">
          <div class="car-info__raw">
            <span class="car-info__raw-label">{{"PAGES.CATEGORY_DETAILS.LABELS.VEHICLE_ID" | translate}}</span>
            <span class="car-info__raw-data">{{categoryDetails.data.vehicleId || '-'}}</span>
          </div>
  
          <div class="car-info__raw">
            <span class="car-info__raw-label">{{"PAGES.CATEGORY_DETAILS.LABELS.MAKE" | translate}}</span>
            <span class="car-info__raw-data">{{categoryDetails.data.make || '-'}}</span>
          </div>
  
          <div class="car-info__raw">
            <span class="car-info__raw-label">{{"PAGES.CATEGORY_DETAILS.LABELS.MODEL" | translate}}</span>
            <span class="car-info__raw-data">{{categoryDetails.data.model || '-'}}</span>
          </div>
  
          <div class="car-info__raw">
            <span class="car-info__raw-label">{{"PAGES.CATEGORY_DETAILS.LABELS.YEAR" | translate}}</span>
            <span class="car-info__raw-data">{{categoryDetails.data.year || '-'}}</span>
          </div>
  
          <div class="car-info__raw">
            <span class="car-info__raw-label">{{"PAGES.CATEGORY_DETAILS.LABELS.ENGINE" | translate}}</span>
            <span class="car-info__raw-data">{{categoryDetails.data.engine || '-'}}</span>
          </div>
        </section>
      </app-widget>
      <app-widget [title]="'PAGES.CATEGORY_DETAILS.WIDGETS.NOTE' | translate" icon="edit-new" *ngIf="categoryDetails.type === CategoryTypeEnum.Car">
        <textarea #notesInput class="category-details__notes" [value]="categoryDetails.maintenance.note" placeholder="Type some notes" (focusout)="onTextAreaFocusOut(notesInput.value)"></textarea>
      </app-widget>
    </div>

    <section class="category-details__tables">
      <ubuntu-container [title]="table.name" *ngFor="let table of categoryDetails.tables">
        <app-button actions
                    *ngIf="categoryDetails.type == CategoryTypeEnum.Car"
                    [matMenuTriggerFor]="contextMenu"
                    [matMenuTriggerData]="{name: table.name}"
                    button-transparent>
          <mat-icon>travel_explore</mat-icon>
        </app-button>
        <app-records-table class="category-details__table"
                           *ngIf="table.data.length"
                           [data]="table.data"
                           (edit)="onEdit($event)"
                           (delete)="onDelete($event)"
        ></app-records-table>
      </ubuntu-container>
    </section>
  </ng-container>

  <mat-menu #contextMenu="matMenu">
    <ng-template matMenuContent let-name="name">
      <button class="menu-item"
              *ngFor="let site of sitesForSearch"
              mat-menu-item
              (click)="onSearch(site.url, name)">
        <span>{{site.name}}</span>
      </button>
    </ng-template>
  </mat-menu>
</app-details>